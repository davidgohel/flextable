---
title: "Pdflatex not working with flextable"
engine: knitr
format:
  pdf: 
    pdf-engine: pdflatex
    keep-tex: true
---


```{r}
#| label: setup

library(flextable)
# debugging, as it's impossible to do it interactively with quarto
quarto_metadata <- knitr::opts_current$get()
saveRDS(quarto_metadata, "./quarto_metadata.rds")
rmarkdown_metadata <- rmarkdown::metadata
saveRDS(rmarkdown_metadata, "./rmarkdown_metadata.rds")
# pandoc_args <- knitr::opts_knit$get("rmarkdown.pandoc.args")
# saveRDS(pandoc_args, "./rmarkdown_pandoc_args.rds")

# rmarkdown::render("./tests/testthat/qmd/use-printer-with-pdflatex.qmd",
#                   output_format = c("pdf_document"),
#                   output_file = "C:/Users/basti/OneDrive/04. BNCL (Post Doc)/Open-Source Development/flextable/tests/testthat/qmd/use-printer-with-pdflatex.qmd")


# quarto::quarto_render("./tests/testthat/qmd/use-printer-with-pdflatex.qmd")
```


- `flextable` with Equations, see @tbl-flextable:

```{r}
#| label: tbl-flextable


eqs_flextable <- c(
    "(ax^2 + bx + c = 0)",
    "a \\ne 0",
    "x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}")
df <- tibble::tibble(`Y \\sim W` = eqs_flextable)


ft <- flextable(df) |>
  compose(j = 1, part = "header",
          value = as_paragraph(as_equation(`Y \\sim W`, width = 2, height = .5)),
          use_dot = TRUE) |>
  compose(j = 1, part = "body",
          value = as_paragraph(as_equation(`Y \\sim W`, width = 2, height = .5))) |>
  align(align = "center", part = "all")

ft

```
